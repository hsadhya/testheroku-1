<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<link href='reset.css' rel="stylesheet"/>
<link href='style.css' rel="stylesheet"/>
	<title>Experiment - final part</title>
</head>
<body>
<!-- http://colorvisiontesting.com/ishihara.htm -->
<div class="pageWrapper">
<div class="contenArea">
<p id="intro">This is a color-blindness test. Type in the number in the textbox that you see below each circle, or  enter "NA" if<br> 
you cannot recognise any. To submit your answer, click on "Confirm".</p>
<div class='picTest'>
<!--<img id="picTest" src="http://localhost:3000/images/plate2.jpg" alt="Type "Error" if no image is displayed">-->
</div>

<script type="text/javascript">
$(document).ready(function() {
  $(window).keydown(function(event){
    if(event.keyCode == 13) {
      event.preventDefault();
      return false;
    }
  });
});
</script>

<form id="colorTest" method="POST" action= "/colorblind">
	<script type="text/javascript">
		/* idNum is passed from another page to this one */
		$(document).ready(function() {
		var arr = [2,5,6,7,10,16,29,42,57];
		var x = 0;
		document.getElementById("memberID").value = localStorage.memberID;
		
			$('#responseText').on('input',function(){

		});
			$('#confirm').click(function(){
				$("#correct").attr('value', arr[x]);
				x = x + 1;
				$('.container').each(function(){
					/* retrieve the nth image from the div container */
					var path = $(this).find("img").eq(x).attr('src');
					$("#picTest").attr('src', path);
					$.POST("/colorblind",$("colorTest").serialize());
					$("#responseText").val("");

				if (x == 9) {
					$("#colorTest").remove();
					$("#picTest").remove();
  					$("#intro").html("The experiment is now concluded, thanks!");
				}
				});
			
			});
			});
		</script>



	<input type='hidden' id="memberID" name="memberID">
	<input type='hidden' id='correct' name="correct" value= "correct">


<div class="container" id="container" >
	<img id="picTest2" src="https://ddslabexp.herokuapp.com/pics/plate2.jpg" alt="Type "Error" if no image is displayed">
	<input type="text" id="colorboxanswer1" name="colorboxanswer1">
	<img id="picTest5" src="https://ddslabexp.herokuapp.com/pics/plate5.jpg" alt="Type "Error" if no image is displayed">
	<input type="text" id="colorboxanswer2" name="colorboxanswer2">
	<img id="picTest6" src="https://ddslabexp.herokuapp.com/pics/plate6.jpg" alt="Type "Error" if no image is displayed">
	<input type="text" id="colorboxanswer3" name="colorboxanswer3">
	<img id="picTest7" src="https://ddslabexp.herokuapp.com/pics/plate7.jpg" alt="Type "Error" if no image is displayed">
	<input type="text" id="colorboxanswer4" name="colorboxanswer4">
	<img id="picTest10" src="https://ddslabexp.herokuapp.com/pics/plate10.jpg" alt="Type "Error" if no image is displayed">
	<input type="text" id="colorboxanswer5" name="colorboxanswer5">
	<img id="picTest16" src="https://ddslabexp.herokuapp.com/pics/plate16.jpg" alt="Type "Error" if no image is displayed">
	<input type="text" id="colorboxanswer6" name="colorboxanswer6">
	<img id="picTest29" src="https://ddslabexp.herokuapp.com/pics/plate29.jpg" alt="Type "Error" if no image is displayed">
	<input type="text" id="colorboxanswer7" name="colorboxanswer7">
	<img id="picTest42" src="https://ddslabexp.herokuapp.com/pics/plate42.jpg" alt="Type "Error" if no image is displayed">
	<input type="text" id="colorboxanswer8" name="colorboxanswer8">
	<img id="picTest57" src="https://ddslabexp.herokuapp.com/pics/plate57.jpg" alt="Type "Error"  if no image is displayed">
	<input type="text" id="colorboxanswer9" name="colorboxanswer9">
		<input type="submit" id='confirm' name="confirm" value="Confirm" style="{font-size: 16px;background-color:gray}">
</div>
</form>
<!--<script>document.getElementById("container").style.visibility = "hidden";</script>-->
</div>
</div>

</body>
</html>